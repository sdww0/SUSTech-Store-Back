<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.susstore.mapper.UserMapper">
    <select id="queryUserList" resultType="User">
        select * from store."user"
    </select>

    <select id="queryUserById" resultType="User" parameterType="int">
        select * from store."user" where user_id=#{id}
    </select>

    <insert id="addUser" parameterType="User" >
        insert into store."user" (name,password,gender,credit,money,picture_path)
        values (#{name},#{password},#{gender},0,0.0,'/user_picture_default.png') returning user_id;
    </insert>

    <update id="updateUser" parameterType="User">
        update store."user"
        <set>
            <if test="name != null">name=#{name,}</if>
            <if test="password != null">password=#{password},</if>
            <if test="gender != null">gender=#{ gender},</if>
            <if test="birthday != null"> birthday=#{ birthday},</if>
            <if test="credit != null">credit=#{credit},</if>
            <if test="phone != null">phone=#{phone},</if>
            <if test="email != null">email=#{email},</if>
            <if test="IDCard != null">id_card=#{IDCard},</if>
            <if test="money != null">money=#{money},</if>
            <if test="picturePath != null">picture_path=#{picturePath}</if>
        </set>
        where user_id=#{userId};
    </update>

    <delete id="deleteUser" parameterType="int">
        delete from store."user" where user_id=#{userId}
    </delete>

    <select id="login" parameterType="map" resultType="int">
        select user_id from store."user" where name=#{username} and password=#{password}
    </select>

</mapper>